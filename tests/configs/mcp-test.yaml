# MCP Tool Test Configuration
# Defines test cases for MCP server tools with arguments and expected schemas

test_tools:
  # Core tools
  list_s3_buckets:
    description: "List available S3 buckets"
    arguments: {}
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                enum: ["text"]
              text:
                type: string
            required: ["type", "text"]
      required: ["content"]

  list_objects:
    description: "List objects in S3 bucket"
    arguments:
      bucket: "quilt-example"
      path: ""
      limit: 10
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  get_object:
    description: "Get S3 object content"
    arguments:
      bucket: "quilt-example"
      key: "README.md"
      limit: 1000
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  search_objects:
    description: "Search for objects in S3"
    arguments:
      bucket: "quilt-example"
      query: "test"
      limit: 5
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # Package operations
  list_packages:
    description: "List packages in registry"
    arguments:
      registry_url: "https://open.quiltdata.com"
      limit: 5
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  get_package:
    description: "Get package information"
    arguments:
      registry_url: "https://open.quiltdata.com"
      namespace: "examples"
      package_name: "wellplates"
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  search_packages:
    description: "Search packages in registry"
    arguments:
      registry_url: "https://open.quiltdata.com"
      query: "example"
      limit: 3
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # Metadata operations
  set_object_metadata:
    description: "Set metadata for S3 object"
    arguments:
      bucket: "quilt-example"
      key: "test/metadata-test.txt"
      metadata:
        description: "Test file for metadata operations"
        tags: ["test", "metadata"]
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  get_object_metadata:
    description: "Get metadata for S3 object"
    arguments:
      bucket: "quilt-example"
      key: "test/metadata-test.txt"
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # Registry operations
  get_registry_status:
    description: "Get registry status information"
    arguments:
      registry_url: "https://open.quiltdata.com"
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # Advanced search
  search_metadata:
    description: "Search objects by metadata"
    arguments:
      bucket: "quilt-example"
      metadata_query:
        tags: ["test"]
      limit: 5
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # Package operations
  create_package_draft:
    description: "Create a package draft"
    arguments:
      registry_url: "https://open.quiltdata.com"
      namespace: "test"
      package_name: "draft-test"
      message: "Test package draft creation"
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # File operations
  upload_object:
    description: "Upload object to S3"
    arguments:
      bucket: "quilt-example"
      key: "test/upload-test.txt"
      content: "Test content for upload"
      content_type: "text/plain"
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

  # Analysis tools
  analyze_object:
    description: "Analyze object structure and metadata"
    arguments:
      bucket: "quilt-example"
      key: "README.md"
    response_schema:
      type: object
      properties:
        content:
          type: array
      required: ["content"]

# Test configuration
test_config:
  timeout: 30
  retry_attempts: 2
  fail_fast: false
  
# Environment-specific settings
environments:
  development:
    registry_url: "https://open.quiltdata.com"
    test_bucket: "quilt-example"
  
  production:
    registry_url: "https://quiltdata.com"
    test_bucket: "production-test-bucket"