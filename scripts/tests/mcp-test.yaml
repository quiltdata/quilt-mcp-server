_generated_by: scripts/mcp-test-setup.py - Auto-generated test configuration with
  discovery and tool loops
_note: Edit test cases below to customize arguments and validation. Tool loops test
  write operations.
environment:
  AWS_PROFILE: default
  AWS_DEFAULT_REGION: us-east-1
  QUILT_CATALOG_URL: https://nightly.quilttest.com
  QUILT_TEST_BUCKET: quilt-ernest-staging
  QUILT_TEST_PACKAGE: raw/test
  QUILT_TEST_ENTRY: README.md
test_tools:
  bucket_objects_list:
    description: List objects in an S3 bucket with optional prefix filtering - S3
      bucket exploration and object retrieval tasks
    effect: none
    category: optional-arg
    arguments:
      bucket: quilt-ernest-staging
      prefix: raw/test/
      max_keys: 5
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_sso_config_remove:
    description: Remove the SSO configuration - Quilt governance and administrative
      operations
    effect: remove
    category: write-effect
    arguments: {}
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_sso_config_set:
    description: Set the SSO configuration - Quilt governance and administrative operations
    effect: create
    category: write-effect
    arguments:
      config: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_tabulator_open_query_set:
    description: Set the tabulator open query status - Quilt governance and administrative
      operations
    effect: create
    category: write-effect
    arguments:
      enabled: false
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_add_roles:
    description: Add roles to a user - Quilt governance and administrative operations
    effect: update
    category: write-effect
    arguments:
      name: test_name
      roles: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_create:
    description: Create a new user in the registry - Quilt governance and administrative
      operations
    effect: create
    category: write-effect
    arguments:
      name: test_name
      email: test_value
      role: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_delete:
    description: Delete a user from the registry - Quilt governance and administrative
      operations
    effect: remove
    category: write-effect
    arguments:
      name: test_name
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_get:
    description: Get detailed information about a specific user - Quilt governance
      and administrative operations
    effect: none
    category: optional-arg
    arguments:
      name: admin
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_remove_roles:
    description: Remove roles from a user - Quilt governance and administrative operations
    effect: remove
    category: write-effect
    arguments:
      name: test_name
      roles: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_reset_password:
    description: Reset a user's password - Quilt governance and administrative operations
    effect: create
    category: write-effect
    arguments:
      name: test_name
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_set_active:
    description: Set the active status for a user - Quilt governance and administrative
      operations
    effect: create
    category: write-effect
    arguments:
      name: test_name
      active: false
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_set_admin:
    description: Set the admin status for a user - Quilt governance and administrative
      operations
    effect: create
    category: write-effect
    arguments:
      name: test_name
      admin: false
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_set_email:
    description: Update a user's email address - Quilt governance and administrative
      operations
    effect: create
    category: write-effect
    arguments:
      name: test_name
      email: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  admin_user_set_role:
    description: Set the primary and extra roles for a user - Quilt governance and
      administrative operations
    effect: create
    category: write-effect
    arguments:
      name: test_name
      role: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  athena_query_execute:
    description: Execute SQL query against Athena using SQLAlchemy/PyAthena - Athena
      querying and Glue catalog inspection workflows
    effect: configure
    category: optional-arg
    arguments:
      query: SELECT 1 as test_value
      max_results: 10
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  athena_query_validate:
    description: Validate SQL query syntax without executing it - Athena querying
      and Glue catalog inspection workflows
    effect: none
    category: required-arg
    arguments:
      query: SHOW TABLES
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  athena_table_schema:
    description: Get detailed schema information for a specific table - Athena querying
      and Glue catalog inspection workflows
    effect: none
    category: optional-arg
    arguments:
      database: userathenadatabase-mbq1ihawbzb7
      table: ai2-semanticscholar-cord-19_manifests
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  athena_tables_list:
    description: List tables in a specific database - Athena querying and Glue catalog
      inspection workflows
    effect: none
    category: optional-arg
    arguments:
      database: userathenadatabase-mbq1ihawbzb7
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  bucket_object_fetch:
    description: Fetch binary or text data from an S3 object - S3 bucket exploration
      and object retrieval tasks
    effect: none
    category: optional-arg
    arguments:
      s3_uri: s3://quilt-ernest-staging/raw/test/.timestamp
      max_bytes: 200
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  bucket_object_info:
    description: Get metadata information for a specific S3 object - S3 bucket exploration
      and object retrieval tasks
    effect: none
    category: required-arg
    arguments:
      s3_uri: s3://quilt-ernest-staging/raw/test/.timestamp
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  bucket_object_link:
    description: Generate a presigned URL for downloading an S3 object - S3 bucket
      exploration and object retrieval tasks
    effect: none
    category: optional-arg
    arguments:
      s3_uri: s3://quilt-ernest-staging/raw/test/.timestamp
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  bucket_object_text:
    description: Read text content from an S3 object - S3 bucket exploration and object
      retrieval tasks
    effect: none
    category: optional-arg
    arguments:
      s3_uri: s3://quilt-ernest-staging/raw/test/.timestamp
      max_bytes: 200
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  bucket_objects_put:
    description: Upload multiple objects to an S3 bucket - S3 bucket exploration and
      object retrieval tasks
    effect: create
    category: write-effect
    arguments:
      bucket: quilt-ernest-staging
      items: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  catalog_configure:
    description: Configure Quilt catalog URL - Quilt authentication and catalog navigation
      workflows
    effect: configure
    category: required-arg
    arguments:
      catalog_url: https://nightly.quilttest.com
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  catalog_uri:
    description: Build Quilt+ URI - Quilt authentication and catalog navigation workflows
    effect: none
    category: optional-arg
    arguments:
      registry: quilt-ernest-staging
      package_name: raw/test
      path: .timestamp
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  catalog_url:
    description: Generate Quilt catalog URL - Quilt authentication and catalog navigation
      workflows
    effect: none
    category: optional-arg
    arguments:
      registry: quilt-ernest-staging
      package_name: raw/test
      path: .timestamp
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  check_bucket_access:
    description: Check the caller's access to ``bucket``.
    effect: none
    category: optional-arg
    arguments:
      bucket: quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  create_data_visualization:
    description: Create interactive data visualization for Quilt packages - Generate
      ECharts configurations from tabular data.
    effect: create
    category: write-effect
    arguments:
      data:
        x:
        - 1
        - 2
        - 3
        y:
        - 4
        - 5
        - 6
      plot_type: scatter
      x_column: x
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  create_quilt_summary_files:
    description: Create all Quilt summary files for a package - Quilt summary file
      generation tasks
    effect: create
    category: write-effect
    arguments:
      package_name: raw/test
      package_metadata: raw/test
      organized_structure:
        files:
        - name: test.txt
          size: 100
      readme_content: '# Test Package'
      source_info:
        type: test
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  discover_permissions:
    description: Discover AWS permissions for the current principal.
    effect: none
    category: zero-arg
    arguments:
      check_buckets:
      - quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  generate_package_visualizations:
    description: Generate comprehensive visualizations for the package - Quilt summary
      file generation tasks
    effect: configure
    category: optional-arg
    arguments:
      package_name: raw/test
      organized_structure:
        files:
        - name: test.txt
          size: 100
      file_types:
        txt: 1
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  generate_quilt_summarize_json:
    description: Generate a comprehensive quilt_summarize.json file following Quilt
      standards - Quilt summary file generation tasks
    effect: configure
    category: optional-arg
    arguments:
      package_name: raw/test
      package_metadata: raw/test
      organized_structure:
        files:
        - name: test.txt
          size: 100
      readme_content: '# Test Package'
      source_info:
        type: test
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  get_resource:
    description: Access MCP resources via tool interface for backward compatibility.
    effect: none
    category: zero-arg
    arguments: {}
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  package_browse:
    description: Browse the contents of a Quilt package with enhanced file information
      - Quilt package discovery and comparison tasks
    effect: none
    category: optional-arg
    arguments:
      package_name: raw/test
      registry: quilt-ernest-staging
      recursive: false
      include_signed_urls: false
      top: 5
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  package_create:
    description: Create a new Quilt package from S3 objects - Core package creation,
      update, and deletion workflows
    effect: create
    category: write-effect
    arguments:
      package_name: raw/test
      s3_uris: test_value
      registry: quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  package_create_from_s3:
    description: Create a well-organized Quilt package from S3 bucket contents with
      smart organization - Bulk S3-to-package ingestion workflows
    effect: create
    category: write-effect
    arguments:
      source_bucket: quilt-ernest-staging
      package_name: raw/test
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  package_delete:
    description: Delete a Quilt package from the registry - Core package creation,
      update, and deletion workflows
    effect: remove
    category: write-effect
    arguments:
      package_name: raw/test
      registry: quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  package_diff:
    description: Compare two package versions and show differences - Quilt package
      discovery and comparison tasks
    effect: none
    category: optional-arg
    arguments:
      package1_name: raw/test
      package2_name: raw/test
      registry: quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  package_update:
    description: Update an existing Quilt package by adding new S3 objects - Core
      package creation, update, and deletion workflows
    effect: update
    category: write-effect
    arguments:
      package_name: raw/test
      s3_uris: test_value
      registry: quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  search_catalog.global.no_bucket:
    tool: search_catalog
    description: Intelligent unified search across Quilt catalog using Elasticsearch
      - Catalog and package search experiences
    effect: none
    arguments:
      query: README.md
      limit: 10
      scope: global
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
    validation:
      type: search
      min_results: 0
      must_contain: []
      description: Global search across all buckets (may return 0 if bucket enumeration
        unavailable)
  search_catalog.file.no_bucket:
    tool: search_catalog
    description: Intelligent unified search across Quilt catalog using Elasticsearch
      - Catalog and package search experiences
    effect: none
    arguments:
      query: README.md
      limit: 10
      scope: file
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
    validation:
      type: search
      min_results: 0
      must_contain: []
      description: File search across all buckets (may return 0 if bucket enumeration
        unavailable)
      result_shape:
        required_fields:
        - id
        - type
        - title
        - score
  search_catalog.package.no_bucket:
    tool: search_catalog
    description: Intelligent unified search across Quilt catalog using Elasticsearch
      - Catalog and package search experiences
    effect: none
    arguments:
      query: raw/test
      limit: 10
      scope: package
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
    validation:
      type: search
      min_results: 0
      must_contain: []
      description: Package search across all buckets (may return 0 if bucket enumeration
        unavailable)
      result_shape:
        required_fields:
        - id
        - type
        - score
  search_explain:
    description: Explain how a search query would be processed and executed - Catalog
      and package search experiences
    effect: none
    category: optional-arg
    arguments:
      query: CSV files
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  search_suggest:
    description: Get intelligent search suggestions based on partial queries and context
      - Catalog and package search experiences
    effect: none
    category: optional-arg
    arguments:
      partial_query: raw/t
      limit: 5
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_bucket_query:
    description: Execute a bucket-scoped tabulator query.
    effect: none
    category: optional-arg
    arguments:
      bucket_name: quilt-ernest-staging
      query: SELECT 1 as test_value
      max_results: 10
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_list_buckets:
    description: List all buckets (databases) in the Tabulator catalog.
    effect: none
    category: zero-arg
    arguments: {}
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_query_execute:
    description: Execute a query against the Tabulator catalog.
    effect: configure
    category: optional-arg
    arguments:
      query: SELECT 1 as test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_table_create:
    description: Create or update a tabulator table.
    effect: create
    category: write-effect
    arguments:
      bucket_name: quilt-ernest-staging
      table_name: test_table
      schema: test_value
      package_pattern: raw/test
      logical_key_pattern: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_table_delete:
    description: Delete a tabulator table.
    effect: remove
    category: write-effect
    arguments:
      bucket_name: quilt-ernest-staging
      table_name: test_table
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_table_rename:
    description: Rename a tabulator table.
    effect: update
    category: write-effect
    arguments:
      bucket_name: quilt-ernest-staging
      table_name: test_table
      new_table_name: test_name
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  tabulator_tables_list:
    description: List all tabulator tables in a bucket.
    effect: none
    category: required-arg
    arguments:
      bucket: quilt-ernest-staging
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  workflow_add_step:
    description: Add a step to an existing workflow - Workflow tracking and orchestration
      tasks
    effect: update
    category: write-effect
    arguments:
      workflow_id: test_value
      step_id: test_value
      description: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  workflow_create:
    description: Create a new workflow for tracking multi-step operations - Workflow
      tracking and orchestration tasks
    effect: create
    category: write-effect
    arguments:
      workflow_id: test_value
      name: test_name
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  workflow_template_apply:
    description: Apply a pre-defined workflow template - Workflow tracking and orchestration
      tasks
    effect: configure
    category: required-arg
    arguments:
      template_name: cross-package-aggregation
      workflow_id: test-wf-001
      params:
        source_packages:
        - raw/test
        target_package: raw/test-agg
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
  workflow_update_step:
    description: Update the status of a workflow step - Workflow tracking and orchestration
      tasks
    effect: update
    category: write-effect
    arguments:
      workflow_id: test_value
      step_id: test_value
    response_schema:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
      required:
      - content
test_resources:
  auth://status:
    description: Check authentication status and catalog configuration
    effect: none
    uri: auth://status
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  auth://catalog/info:
    description: Get catalog configuration details
    effect: none
    uri: auth://catalog/info
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  auth://filesystem/status:
    description: Check filesystem permissions and writability
    effect: none
    uri: auth://filesystem/status
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  admin://users:
    description: List all users in the Quilt registry with their roles and status
      (requires admin privileges)
    effect: none
    uri: admin://users
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  admin://roles:
    description: List all available roles in the Quilt registry (requires admin privileges)
    effect: none
    uri: admin://roles
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  admin://config/sso:
    description: Current SSO configuration
    effect: none
    uri: admin://config/sso
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  admin://config/tabulator:
    description: Tabulator open query configuration
    effect: none
    uri: admin://config/tabulator
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  athena://databases:
    description: List available Athena databases
    effect: none
    uri: athena://databases
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  athena://workgroups:
    description: List available Athena workgroups
    effect: none
    uri: athena://workgroups
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  athena://query/history:
    description: Recent Athena query execution history (last 50 queries)
    effect: none
    uri: athena://query/history
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  metadata://templates:
    description: List available metadata templates
    effect: none
    uri: metadata://templates
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  metadata://examples:
    description: Example metadata configurations
    effect: none
    uri: metadata://examples
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  metadata://troubleshooting:
    description: Common metadata issues and solutions
    effect: none
    uri: metadata://troubleshooting
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  workflow://workflows:
    description: List all tracked workflows
    effect: none
    uri: workflow://workflows
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
  tabulator://buckets:
    description: List buckets with tabulator tables configured
    effect: none
    uri: tabulator://buckets
    uri_variables: {}
    expected_mime_type: application/json
    content_validation:
      type: json
      min_length: 1
      max_length: 100000
      schema:
        type: object
        description: Auto-generated basic schema - customize as needed
tool_loops:
  admin_user_basic:
    description: Test admin user create/get/delete cycle
    cleanup_on_failure: true
    steps:
    - tool: admin_user_create
      args:
        name: tlu{uuid}
        email: tlu{uuid}@example.com
        role: T4BucketReadRole
      expect_success: true
    - tool: admin_user_get
      args:
        name: tlu{uuid}
      expect_success: true
    - tool: admin_user_delete
      args:
        name: tlu{uuid}
      expect_success: true
      is_cleanup: true
  admin_user_with_roles:
    description: Test admin user add/remove roles
    cleanup_on_failure: true
    steps:
    - tool: admin_user_create
      args:
        name: tlu{uuid}
        email: tlu{uuid}@example.com
        role: T4BucketReadRole
      expect_success: true
    - tool: admin_user_add_roles
      args:
        name: tlu{uuid}
        roles:
        - T4BucketWriteRole
      expect_success: true
    - tool: admin_user_get
      args:
        name: tlu{uuid}
      expect_success: true
    - tool: admin_user_remove_roles
      args:
        name: tlu{uuid}
        roles:
        - T4BucketWriteRole
      expect_success: true
    - tool: admin_user_delete
      args:
        name: tlu{uuid}
      expect_success: true
      is_cleanup: true
  admin_user_modifications:
    description: Test admin user set operations (email, role, admin, active, reset
      password)
    cleanup_on_failure: true
    steps:
    - tool: admin_user_create
      args:
        name: tlu{uuid}
        email: tlu{uuid}@example.com
        role: T4BucketReadRole
      expect_success: true
    - tool: admin_user_set_email
      args:
        name: tlu{uuid}
        email: tlu{uuid}x@example.com
      expect_success: true
    - tool: admin_user_set_role
      args:
        name: tlu{uuid}
        role: T4BucketWriteRole
      expect_success: true
    - tool: admin_user_set_admin
      args:
        name: tlu{uuid}
        is_admin: true
      expect_success: true
    - tool: admin_user_set_active
      args:
        name: tlu{uuid}
        is_active: false
      expect_success: true
    - tool: admin_user_reset_password
      args:
        name: tlu{uuid}
      expect_success: true
    - tool: admin_user_delete
      args:
        name: tlu{uuid}
      expect_success: true
      is_cleanup: true
  admin_sso_config:
    description: Test SSO configuration set/remove cycle
    cleanup_on_failure: true
    steps:
    - tool: admin_sso_config_set
      args:
        config:
          provider: test-{uuid}
          saml_config: <test_sso_config>test config</test_sso_config>
      expect_success: true
    - tool: admin_sso_config_remove
      args: {}
      expect_success: true
      is_cleanup: true
  admin_tabulator_query:
    description: Test tabulator open query set/toggle cycle
    cleanup_on_failure: true
    steps:
    - tool: admin_tabulator_open_query_set
      args:
        enabled: true
      expect_success: true
    - tool: admin_tabulator_open_query_set
      args:
        enabled: false
      expect_success: true
      is_cleanup: true
  package_lifecycle:
    description: Test package create/update/delete cycle
    cleanup_on_failure: true
    steps:
    - tool: package_create
      args:
        package_name: testuser/loop-pkg-{uuid}
        registry: '{env.QUILT_TEST_BUCKET}'
        s3_uris:
        - '{env.QUILT_TEST_BUCKET}/test-data/sample.csv'
        message: Test package created by tool loop
      expect_success: true
    - tool: package_browse
      args:
        package_name: testuser/loop-pkg-{uuid}
        registry: '{env.QUILT_TEST_BUCKET}'
      expect_success: true
    - tool: package_update
      args:
        package_name: testuser/loop-pkg-{uuid}
        registry: '{env.QUILT_TEST_BUCKET}'
        s3_uris:
        - '{env.QUILT_TEST_BUCKET}/test-data/sample2.csv'
        message: Updated by tool loop
      expect_success: true
    - tool: package_delete
      args:
        package_name: testuser/loop-pkg-{uuid}
        registry: '{env.QUILT_TEST_BUCKET}'
      expect_success: true
      is_cleanup: true
  package_create_from_s3_loop:
    description: Test package_create_from_s3 tool
    cleanup_on_failure: true
    steps:
    - tool: package_create_from_s3
      args:
        source_bucket: '{env.QUILT_TEST_BUCKET}'
        package_name: testuser/s3pkg-{uuid}
        source_prefix: test-data/
        confirm_structure: false
        force: true
      expect_success: true
    - tool: package_delete
      args:
        package_name: testuser/s3pkg-{uuid}
        registry: '{env.QUILT_TEST_BUCKET}'
      expect_success: true
      is_cleanup: true
  bucket_objects_write:
    description: Test bucket object put/fetch cycle
    cleanup_on_failure: true
    steps:
    - tool: bucket_objects_put
      args:
        bucket: '{env.QUILT_TEST_BUCKET}'
        items:
        - key: test-loop-{uuid}.txt
          text: Test content from tool loop
      expect_success: true
    - tool: bucket_object_fetch
      args:
        s3_uri: '{env.QUILT_TEST_BUCKET}/test-loop-{uuid}.txt'
        max_bytes: 1000
      expect_success: true
  workflow_basic:
    description: Test workflow create/add step/update step cycle
    cleanup_on_failure: true
    steps:
    - tool: workflow_create
      args:
        workflow_id: test-wf-{uuid}
        name: Test Workflow {uuid}
      expect_success: true
    - tool: workflow_add_step
      args:
        workflow_id: test-wf-{uuid}
        step_id: step1
        description: Test Step 1
      expect_success: true
    - tool: workflow_update_step
      args:
        workflow_id: test-wf-{uuid}
        step_id: step1
        status: completed
      expect_success: true
  visualization_create:
    description: Test visualization creation
    cleanup_on_failure: false
    steps:
    - tool: create_data_visualization
      args:
        data:
          x:
          - 1
          - 2
          - 3
          y:
          - 4
          - 5
          - 6
        plot_type: scatter
        x_column: x
        y_column: y
      expect_success: true
  tabulator_table_lifecycle:
    description: Test tabulator table create/rename/delete cycle
    cleanup_on_failure: true
    steps:
    - tool: tabulator_table_create
      args:
        bucket_name: '{env.QUILT_TEST_BUCKET}'
        table_name: test_table_{uuid}
        schema:
        - name: col1
          type: string
        package_pattern: '*/pkg'
        logical_key_pattern: '*.csv'
      expect_success: true
    - tool: tabulator_table_rename
      args:
        bucket_name: '{env.QUILT_TEST_BUCKET}'
        old_name: test_table_{uuid}
        new_name: test_table_{uuid}_renamed
      expect_success: true
    - tool: tabulator_table_delete
      args:
        bucket_name: '{env.QUILT_TEST_BUCKET}'
        table_name: test_table_{uuid}_renamed
      expect_success: true
      is_cleanup: true
  quilt_summary_create:
    description: Test create_quilt_summary_files tool
    cleanup_on_failure: false
    steps:
    - tool: create_quilt_summary_files
      args:
        package_name: testuser/test-pkg
        package_metadata:
          description: test
        organized_structure:
          root: []
        readme_content: '# Test Package'
        source_info:
          source: test
        metadata_template: standard
      expect_success: true
test_config:
  timeout: 30
  retry_attempts: 2
  fail_fast: false
